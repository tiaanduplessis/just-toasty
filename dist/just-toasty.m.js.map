{"version":3,"file":"just-toasty.m.js","sources":["../src/index.js"],"sourcesContent":["const WORDS_PER_SECOND = 1.6;\nconst ONE_SECOND = 1000;\n\nfunction css(elem, rules = {}) {\n  Object.keys(rules).forEach((key) => {\n    elem.style[key] = rules[key];\n  });\n}\n\n// https://stackoverflow.com/a/17980070/7027045\nfunction stripHTML(html = \"\") {\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n}\n\nfunction getDurationBasedOnWords(content) {\n  const words = stripHTML(content).split(\" \");\n  return (words.length * ONE_SECOND) / WORDS_PER_SECOND;\n}\n\nfunction toast(content = \"\", opts = {}) {\n  const {\n    className = \"\",\n    duration = getDurationBasedOnWords(content),\n    target = \"body\",\n    offset = 15,\n    styles = {},\n    selector = \"just-toasty\",\n    role = \"alert\",\n    type = \"polite\",\n    cb = () => {},\n  } =\n    typeof opts === \"number\"\n      ? { duration: opts }\n      : typeof opts === \"function\"\n      ? { cb: opts }\n      : opts;\n\n  const [vert, hor] = [\n    styles.bottom ? \"bottom\" : \"top\",\n    styles.left ? \"left\" : \"right\",\n  ];\n  const targetElem = document.querySelector(target);\n  const elem = document.createElement(\"div\");\n\n  elem.setAttribute(\"role\", role);\n  elem.setAttribute(\"aria-live\", type);\n  elem.setAttribute(\"aria-atomic\", \"true\");\n\n  elem.classList.add(selector);\n  className && elem.classList.add(className);\n  elem.innerHTML = content;\n\n  css(\n    elem,\n    Object.assign(\n      {\n        [hor]: \"15px\",\n        opacity: 1,\n        padding: \"1em 1.5em\",\n        zIndex: 9999,\n        color: \"#fff\",\n        background: \"rgba(0,0,10,0.8)\",\n        display: \"inline-block\",\n        position: \"fixed\",\n        borderRadius: \".2em\",\n        top: \"-100px\",\n        fontFamily: \"inherit\",\n        transition: \"all 0.4s ease-out\",\n      },\n      styles\n    )\n  );\n\n  targetElem.insertBefore(elem, targetElem.firstChild);\n\n  let verticalOffset = offset;\n\n  document.querySelectorAll(`.${selector}`).forEach((elem) => {\n    const height = elem.clientHeight;\n    css(elem, {\n      [vert]: verticalOffset + \"px\",\n    });\n    verticalOffset += height + offset;\n  });\n\n  setTimeout(function () {\n    const width = elem.offsetWidth;\n    css(elem, {\n      [hor]: \"-\" + width + \"px\",\n      opacity: 0,\n    });\n    setTimeout(() => {\n      elem.remove();\n      cb();\n    }, 1000);\n  }, duration);\n\n  return elem;\n}\n\nexport default toast;\n"],"names":["css","elem","rules","Object","keys","forEach","key","style","content","opts","duration","cb","html","tmp","document","implementation","createHTMLDocument","body","innerHTML","textContent","innerText","stripHTML","split","length","getDurationBasedOnWords","styles","bottom","left","targetElem","querySelector","target","createElement","setAttribute","role","type","classList","add","selector","className","assign","hor","opacity","padding","zIndex","color","background","display","position","borderRadius","top","fontFamily","transition","insertBefore","firstChild","verticalOffset","offset","querySelectorAll","height","clientHeight","vert","setTimeout","offsetWidth","remove"],"mappings":"AAGA,SAASA,EAAIC,EAAMC,kBAAQ,IACzBC,OAAOC,KAAKF,GAAOG,iBAASC,GAC1BL,EAAKM,MAAMD,GAAOJ,EAAMI,oBAgB5B,SAAeE,EAAcC,wBAAJ,mBAAW,UAYhB,iBAATA,EACH,CAAEC,SAAUD,GACI,mBAATA,EACP,CAAEE,GAAIF,GACNA,+BAdQ,oCAPhB,SAAiCD,UAfd,IASnB,SAAmBI,kBAAO,QACpBC,EAAMC,SAASC,eAAeC,mBAAmB,OAAOC,YAC5DJ,EAAIK,UAAYN,EACTC,EAAIM,aAAeN,EAAIO,WAAa,GAI7BC,CAAUb,GAASc,MAAM,KACzBC,OAlBS,IAwBVC,CAAwBhB,kCAC1B,sCACA,kCACA,oCACE,2CACJ,qCACA,wDASW,CAClBiB,EAAOC,OAAS,SAAW,MAC3BD,EAAOE,KAAO,OAAS,uBAEnBC,EAAad,SAASe,cAAcC,GACpC7B,EAAOa,SAASiB,cAAc,OAEpC9B,EAAK+B,aAAa,OAAQC,GAC1BhC,EAAK+B,aAAa,YAAaE,GAC/BjC,EAAK+B,aAAa,cAAe,QAEjC/B,EAAKkC,UAAUC,IAAIC,GACnBC,GAAarC,EAAKkC,UAAUC,IAAIE,GAChCrC,EAAKiB,UAAYV,EAEjBR,EACEC,EACAE,OAAOoC,WACL,IACGC,GAAM,SACPC,QAAS,IACTC,QAAS,cACTC,OAAQ,OACRC,MAAO,SACPC,WAAY,qBACZC,QAAS,iBACTC,SAAU,UACVC,aAAc,SACdC,IAAK,WACLC,WAAY,YACZC,WAAY,uBAEd1B,IAIJG,EAAWwB,aAAanD,EAAM2B,EAAWyB,gBAErCC,EAAiBC,SAErBzC,SAAS0C,qBAAqBnB,GAAYhC,iBAASJ,SAC3CwD,EAASxD,EAAKyD,aACpB1D,EAAIC,MAAM,IACP0D,GAAOL,EAAiB,SAE3BA,GAAkBG,EAASF,IAG7BK,WAAW,iBAET5D,EAAIC,MAAM,IACPuC,GAAM,IAFKvC,EAAK4D,YAEI,OACrBpB,QAAS,MAEXmB,sBACE3D,EAAK6D,SACLnD,KACC,MACFD,GAEIT"}